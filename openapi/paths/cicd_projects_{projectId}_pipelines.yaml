parameters:
  - name: projectId
    in: path
    required: true
    description: GitLab project ID
    schema:
      type: integer
get:
  tags:
    - CI/CD
  summary: List pipelines by project ID
  description: "List CI/CD pipelines for a project (proxying GitLab /projects/:id/pipelines)."
  operationId: listPipelinesByProject
  security:
    - api_key: []
    - basic_auth: []
  parameters:
    - name: page
      in: query
      schema:
        type: integer
      description: Page number
    - name: per_page
      in: query
      schema:
        type: integer
      description: Items per page
    - name: ref
      in: query
      schema:
        type: string
      description: Filter by ref (branch or tag)
    - name: status
      in: query
      schema:
        type: string
        enum: [created, waiting_for_resource, preparing, pending, running, success, failed, canceled, skipped, manual, scheduled]
      description: Filter by pipeline status
  responses:
    "200":
      description: OK
      content:
        application/json:
          schema:
            type: array
            items:
              type: object
              properties:
                id:
                  type: integer
                iid:
                  type: integer
                project_id:
                  type: integer
                status:
                  type: string
                source:
                  type: string
                ref:
                  type: string
                sha:
                  type: string
                name:
                  type: string
                web_url:
                  type: string
                  format: uri
                created_at:
                  type: string
                  format: date-time
                updated_at:
                  type: string
                  format: date-time
          examples:
            example:
              value:
                - id: 47
                  iid: 12
                  project_id: 1
                  status: pending
                  source: push
                  ref: new-pipeline
                  sha: a91957a858320c0e17f3a0eca7cfacbff50ea29a
                  name: Build pipeline
                  web_url: https://example.com/foo/bar/pipelines/47
                  created_at: 2016-08-11T11:28:34.085Z
                  updated_at: 2016-08-11T11:32:35.169Z
    "401":
      description: Unauthorized
    "502":
      description: Bad Gateway (GitLab upstream error)
