parameters:
  - name: projectId
    in: path
    required: true
    description: GitLab project ID
    schema:
      type: integer
get:
  tags:
    - CI/CD
  summary: List commits by project ID
  description: "List commits for a project (proxying GitLab GET /projects/:id/repository/commits)."
  operationId: listCommitsByProject
  security:
    - api_key: []
    - basic_auth: []
  parameters:
    - name: ref_name
      in: query
      required: false
      schema:
        type: string
      description: The name of a repository branch or tag or if not given the default branch
    - name: since
      in: query
      required: false
      schema:
        type: string
        format: date-time
      description: Only commits after or on this date are returned (ISO 8601)
    - name: until
      in: query
      required: false
      schema:
        type: string
        format: date-time
      description: Only commits before or on this date are returned (ISO 8601)
    - name: path
      in: query
      required: false
      schema:
        type: string
      description: Only commits containing this file path
    - name: page
      in: query
      schema:
        type: integer
      description: Page number
    - name: per_page
      in: query
      schema:
        type: integer
      description: Items per page
  responses:
    "200":
      description: OK
      content:
        application/json:
          schema:
            type: array
            items:
              type: object
              properties:
                id:
                  type: string
                  description: Commit SHA
                short_id:
                  type: string
                title:
                  type: string
                author_name:
                  type: string
                author_email:
                  type: string
                authored_date:
                  type: string
                  format: date-time
                committer_name:
                  type: string
                committer_email:
                  type: string
                committed_date:
                  type: string
                  format: date-time
                created_at:
                  type: string
                  format: date-time
                message:
                  type: string
                parent_ids:
                  type: array
                  items:
                    type: string
                web_url:
                  type: string
                  format: uri
                trailers:
                  type: object
                  additionalProperties: true
                extended_trailers:
                  type: object
                  additionalProperties: true
          examples:
            example:
              value:
                - id: "ed899a2f4b50b4370feeea94676502b42383c746"
                  short_id: "ed899a2f4b5"
                  title: "Replace sanitize with escape once"
                  author_name: "Example User"
                  author_email: "user@example.com"
                  authored_date: "2021-09-20T11:50:22.001+00:00"
                  committer_name: "Administrator"
                  committer_email: "admin@example.com"
                  committed_date: "2021-09-20T11:50:22.001+00:00"
                  created_at: "2021-09-20T11:50:22.001+00:00"
                  message: "Replace sanitize with escape once"
                  parent_ids:
                    - "6104942438c14ec7bd21c6cd5bd995272b3faff6"
                  web_url: "https://gitlab.example.com/janedoe/gitlab-foss/-/commit/ed899a2f4b50b4370feeea94676502b42383c746"
                  trailers: {}
                  extended_trailers: {}
                - id: "6104942438c14ec7bd21c6cd5bd995272b3faff6"
                  short_id: "6104942438c"
                  title: "Sanitize for network graph"
                  author_name: "randx"
                  author_email: "user@example.com"
                  committer_name: "ExampleName"
                  committer_email: "user@example.com"
                  created_at: "2021-09-20T09:06:12.201+00:00"
                  message: "Sanitize for network graph\nCc: John Doe <johndoe@gitlab.com>\nCc: Jane Doe <janedoe@gitlab.com>"
                  parent_ids:
                    - "ae1d9fb46aa2b07ee9836d49862ec4e2c46fbbba"
                  web_url: "https://gitlab.example.com/janedoe/gitlab-foss/-/commit/ed899a2f4b50b4370feeea94676502b42383c746"
                  trailers:
                    Cc: "Jane Doe <janedoe@gitlab.com>"
                  extended_trailers:
                    Cc:
                      - "John Doe <johndoe@gitlab.com>"
                      - "Jane Doe <janedoe@gitlab.com>"
    "401":
      description: Unauthorized
    "404":
      description: Not Found
    "502":
      description: Bad Gateway (GitLab upstream error)
